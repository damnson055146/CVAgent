# 渲染调试指南

## 问题排查步骤

### 1. 检查控制台输出
在浏览器开发者工具的控制台中，应该能看到以下日志：

```
开始生成PDF，使用带样式版本...
PDF样式配置: {baseFont: "SimSun", baseFontSize: 12, ...}
解析到的块数: X
```

```
开始生成Word文档...
Word样式配置: {baseFont: "SimSun", baseFontSize: 24, ...}
解析到的块数: X
```

### 2. 检查字体设置
如果看到以下警告，说明字体设置有问题：
```
设置粗体字体失败，使用普通字体: [错误信息]
设置字体失败: SimSun bold [错误信息]
```

### 3. 测试内容
使用以下测试内容来验证渲染效果：

```markdown
# 测试标题
## 测试二级标题
### 测试三级标题

**粗体文本** *斜体文本* `代码文本`

- 列表项目1
- **粗体列表项目**
- *斜体列表项目*

---

::: left
**左侧内容**
:::
::: right
**右侧内容**
:::
```

### 4. 常见问题及解决方案

#### 问题1: 标题没有加粗
**原因**: 字体不支持粗体样式
**解决**: 检查控制台是否有字体设置失败的警告

#### 问题2: 内联格式不显示
**原因**: 正则表达式解析失败
**解决**: 检查文本格式是否正确

#### 问题3: 颜色不显示
**原因**: 颜色配置错误
**解决**: 检查样式配置中的颜色值

### 5. 调试命令

在浏览器控制台中运行以下命令来测试：

```javascript
// 测试PDF生成
const testContent = `# 测试标题\n**粗体文本** *斜体文本*`;
// 调用生成函数...

// 测试Word生成
// 调用生成函数...
```

### 6. 样式配置检查

确保样式配置包含以下内容：

```javascript
// PDF样式配置
{
  h1: {
    fontSize: 22,
    color: [0, 0, 0],
    bold: true,
    spacing: { after: 8, before: 4 }
  },
  h2: {
    fontSize: 15,
    color: [0, 0, 0],
    bold: true,
    spacing: { after: 5, before: 2 },
    border: { bottom: { style: 'solid', width: 0.3, color: [73, 73, 73] } }
  },
  strong: {
    color: [34, 34, 59],
    bold: true
  }
}
```

### 7. 字体支持检查

jsPDF支持的字体：
- helvetica (normal, bold, italic)
- times (normal, bold, italic)
- courier (normal, bold, italic)

中文字体可能需要额外配置。

### 8. 测试步骤

1. 打开浏览器开发者工具
2. 切换到Console标签
3. 在编辑器中输入测试内容
4. 点击生成PDF或Word按钮
5. 查看控制台输出
6. 检查生成的文档

### 9. 报告问题

如果问题仍然存在，请提供：
1. 控制台错误信息
2. 测试内容
3. 浏览器版本
4. 操作系统信息 